/*
 * Devicetree overlay for NUCLEO-H563ZI:
 * - AD7124 ADC on SPI1
 */

/ {
    aliases {
        rtd-test = &ad7124_ch0;
    };

    ad7124_ch0: zephyr,user {
        io-channels = <&ad7124 0>;
    };
};

&spi1 {
    status = "okay";

    ad7124: ad7124@0 {
        compatible = "adi,ad7124-adc";
        status = "okay";
        reg = <0>;
        spi-max-frequency = <1000000>;
        active-device = <1>;
        // reference-enable;
        // power-mode = <0>;
        adc-mode = <0>;
        
        #address-cells = <1>;
        #size-cells = <0>;

        #io-channel-cells = <1>;

        channel@0 {
            reg = <0>;
            zephyr,gain = "ADC_GAIN_4";
            zephyr,reference = "ADC_REF_EXTERNAL0";
            zephyr,acquisition-time = <ADC_ACQ_TIME_DEFAULT>;
            zephyr,resolution = <24>;
            zephyr,current-source-pin = [03 00];
            zephyr,input-positive = <2>;
            zephyr,input-negative = <3>;
        };
    };
};